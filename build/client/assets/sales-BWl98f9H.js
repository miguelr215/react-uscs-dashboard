import{w as L,a as i,p as e}from"./chunk-OIYGIGL5-CMUvuLFw.js";import{u as N,a as F,b as x,c as E,d as M,e as f,L as m,H as $,C as b}from"./useDoughnutCatLabels-D4R5Edbk.js";import{D as T,L as d}from"./DoughnutChart-BBMBpI14.js";import{u as H,a as P}from"./useSalesRevenue-C38dtXeY.js";import"./DashboardContext-CplvL782.js";function O(o,u){const s=new Map;return u==="All"?(o.forEach(a=>{const r=a.sales.reduce((n,l)=>n+l.revenue,0);s.set(a.category,(s.get(a.category)||0)+r)}),Array.from(s.values())):(o.forEach(a=>{if(a.category===u){const r=a.sales.reduce((n,l)=>n+l.revenue,0);s.set(a.name,(s.get(a.name)||0)+r)}}),Array.from(s.values()))}const V=()=>{const[o,u]=i.useState(null),[s,a]=i.useState(null),[r,n]=i.useState(null),{products:l,categories:g,currentCategory:t,loading:v,error:h}=N();return i.useEffect(()=>{const c=F(l,t),A=H(c),C=P(c),D=x(A),j=x(C),R=f(`12 Month Sales Amount for ${t}`,D),S=f(`12 Month Sales Revenue $ for ${t}`,j),p=O(c,t),w=t==="All"?g.slice(1):E(c,t),y=M(`Total Sales Revenue for ${t}`,p,w);u(R),a(S),n(y)},[l,t]),v?e.jsx(m,{}):h?e.jsxs("p",{className:"text-red-500",children:["Error: ",h]}):e.jsxs("section",{children:[e.jsx($,{title:"Sales",description:"View Sales & Revenue stats to understand your financial situation"}),e.jsx(b,{}),e.jsxs("div",{className:"flex flex-col gap-6 items-center lg:flex-row",children:[r?e.jsx("div",{className:"w-full max-w-xl lg:max-w-lg",children:e.jsx(T,{data:r})}):e.jsx(m,{}),e.jsxs("div",{className:"flex flex-col gap-6",children:[o?e.jsx("div",{className:"w-full max-w-xl",children:e.jsx(d,{data:o})}):e.jsx(m,{}),s?e.jsx("div",{className:"w-full max-w-xl",children:e.jsx(d,{data:s})}):e.jsx(m,{})]})]})]})},I=L(V);export{I as default};
